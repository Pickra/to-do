function fetchAndOrDisplay(){0===notesArray.length?notesArray.fetch({success:function(a){a.each(function(a){putInSideBar(a)})}}):($(".notes").html(""),notesArray.each(function(a){putInSideBar(a)}))}function saveButton(){$(".saved-tasks").click(function(){var a=new noteConstructor;a.set("title",$("#title").val()),a.set("content",$("#content").val()),$(".under-main").addClass("hidden"),a.save(null,{success:function(){notesArray.add(a),fetchAndOrDisplay()},error:function(a,b){alert("No dice hombre"+b.descripton)}})})}function putInSideBar(a){var b=$("<li>"+a.get("title")+"</li>");$(".notes").append(b),b.click(function(){putInDisplay(a)})}function putInDisplay(a){$(".output-wrap").html(""),edit=$('<div class="edit btn btn-default new'+a.id+'">-Edit-</div>'),kill=$('<div class="kill btn btn-default new'+a.id+'">*Delete*</div>'),h1=$("<h1>"+a.get("title")+"</h1>"),p=$("<p>"+a.get("content")+"</p>"),$(".output-wrap").append(h1,p,edit,kill),$(edit).click(function(){theEditor(a)}),$(kill).click(function(){theDelete(a)})}function theDelete(a){$(".under-main").html(""),a.destroy({success:function(){fetchAndOrDisplay(),$(".output-wrap").html("")},error:function(){}})}function theEditor(a){var b=$("<a href='#'><div class='editSave'>editSave</div></a>");$(".under-main").removeClass("hidden"),$("#title").val(a.get("title")),$("#content").val(a.get("content")),$(".button-bar").addClass("hidden"),0===$(".editSave").length&&$(".under-main").append(b),$(".editSave").click(function(){a.set("title",$("#title").val()),a.set("content",$("#content").val()),$(".under-main").addClass("hidden"),$(".editSave").addClass("hidden"),$(".output-wrap").html(""),a.save(null,{success:function(a){getValue(a),fetchAndOrDisplay()},error:function(a,b){alert("No dice hombre"+b.descripton)}})})}function getValue(a){$("#title").val(a.get("title")),$("#content").val(a.get("content"))}function makeNote(){$(".new").click(function(){$(".under-main").removeClass("hidden"),$(".button-bar").removeClass("hidden")})}Parse.initialize("mnBJxPoO5anLT4b5gtR4oA3dKs0fUdSnCw1TYr6o","e00VUWvFjONPw4egMhgglRZgpQspAmR8QW7feaZH");var noteConstructor=Parse.Object.extend("ToDo"),objectArray=Parse.Collection.extend({model:noteConstructor}),notesArray=new objectArray,edit,kill,h1,p;$(document).ready(function(){makeNote(),fetchAndOrDisplay(),saveButton()});